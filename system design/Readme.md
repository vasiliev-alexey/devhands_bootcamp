### **Функциональные и нефункциональные требования к порталу продажи билетов на чемпионат мира по футболу**

#### **1. Функциональные требования **

##### **1.1. Управление пользователями**

- Регистрация и аутентификация пользователей (логин/пароль, OAuth, двухфакторная аутентификация).
- Разделение ролей: болельщик, администратор, менеджер мероприятий.
- Восстановление пароля через email/SMS.
- Личный кабинет с историей покупок и настройками профиля.

##### **1.2. Поиск и бронирование билетов**

- Поиск матчей по дате, стадиону, командам, категории билетов.
- Отображение схемы стадиона с выбором места.
- Бронирование билетов на определенное время (например, 15 минут).
- Поддержка различных типов билетов (обычные, VIP, групповые, семейные).

##### **1.3. Оплата и подтверждение**

- Интеграция с платежными системами (банковские карты, PayPal, криптовалюты и др.).
- Поддержка возврата средств (частичного/полного) по правилам FIFA.
- Генерация электронных билетов (PDF, QR-код) и отправка на email/SMS.
- Проверка билетов при входе на стадион (сканирование QR).

##### **1.4. Администрирование и отчетность**

- Управление квотами билетов для разных стран/регионов.
- Настройка цен и скидок (раннее бронирование, групповые заказы).
- Генерация отчетов по продажам, посещаемости, выручке.
- Интеграция с антифродом (противодействие мошенничеству)

##### **1.5. Дополнительная функциональность**

- Уведомления о матчах (email, push-уведомления).
- Интеграция с логистическими сервисами.
- Мультиязычная поддержка (официальные языки FIFA).

---  

#### **2. Нефункциональные требования**

##### **2.1. Производительность**

- Система должна обеспечивать работу до 100_000_000 DAU
- Система должна выдерживать до **80_000_000 одновременных пользователей** в час пик.
- Время отклика при поиске билетов — **не более 2 секунд**.
- Оплата должна обрабатываться за **менее 10 секунд**.

##### **2.2. Надежность**

- Доступность системы **99.99%** во время продаж.
- Резервные серверы и автоматическое восстановление при сбоях.
- Защита от DDoS-атак и перегрузки серверов.

##### **2.3. Безопасность**

- Шифрование данных (TLS 1.2/1.3, PCI DSS для платежей).
- Защита от SQL-инъекций, XSS, CSRF.
- Верификация пользователей для борьбы с ботами.

##### **2.4. Масштабируемость**
- Возможность горизонтального масштабирования (Kubernetes, облачные решения).
- Балансировка нагрузки между серверами.

##### **2.5. Совместимость**

- Поддержка основных браузеров ( Yandex Browser,Chrome, Firefox, Safari, Edge).
- Работа на мобильных устройствах на iOS/Android.

##### **2.6. Юридические требования (Compliance)**

- Соответствие GDPR (защита персональных данных).
- Поддержка локальных законов о продаже билетов (например, запрет перепродажи).

---

## Расчет RPS

Вводные данные:

* DAU — Количество уникальных пользователей за день — 100_000_000.
* Пользователь делает в среднем 5 попыток купить билет в день.
* 80% пользователей попытаются купить билет в первые 4 часа после начала этапа продажи билетов.
* Пользователь пытается купить в среднем 3 билета на 3 матча.
* Сценарий покупки это 5 запросов на получение данных и обработку (списки доступных матчей, поиск свободных билетов на
  матч, выбор места, оформление билета, оплата билета)

Расчет
1. Определяем пользователей, активных в пиковый период:
    - 80% от 100_000_000 DAU = 100_000_000 * 0.8 = 80_000_000 пользователей в пиковый период.

2. Общее количество попыток покупки в пиковый период:
    - Каждый пользователь делает 5 попыток.
    - Итого попыток = 80_000_000 * 5 = 400_000_000 попыток.

3. Общее число запросов на сервер:
    - Каждая попытка покупки включает 5 запросов (согласно сценарию покупки).
    - Итого запросов = 400_000_000 * 5 = 2_000_000_000 запросов в пиковый период.

4. Количество секунд в пиковом периоде:
    - Пиковый период длится 4 часа = 4 * 60 * 60 = 14_400 секунд.

5. Пиковый RPS:
    - Пиковый RPS = 2_000_000_000 / 14_400  =  138,889 RPS ~ 140_000

